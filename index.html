<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6b0001; -webkit-text-stroke: #6b0001}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #fb0007; -webkit-text-stroke: #fb0007}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #093c94; -webkit-text-stroke: #093c94}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    span.s1 {font-kerning: none; background-color: #ecf1f7}
    span.s2 {font-kerning: none; color: #fb0007; background-color: #ecf1f7; -webkit-text-stroke: 0px #fb0007}
    span.s3 {font-kerning: none; color: #2a2a2a; background-color: #ecf1f7; -webkit-text-stroke: 0px #2a2a2a}
    span.s4 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s5 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s6 {font-kerning: none; color: #0000ff; background-color: #ecf1f7; -webkit-text-stroke: 0px #0000ff}
    span.s7 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s8 {font-kerning: none; color: #093c94; background-color: #ecf1f7; -webkit-text-stroke: 0px #093c94}
    span.s9 {font-kerning: none; color: #137646; background-color: #ecf1f7; -webkit-text-stroke: 0px #137646}
    span.s10 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
    span.s13 {font-kerning: none; color: #bf1c25; background-color: #ecf1f7; -webkit-text-stroke: 0px #bf1c25}
    span.s14 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s15 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"pt-BR"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s1">Ferramenta de Avaliação de Riscos com IA</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/chart.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.gstatic.com"</span><span class="s5"> </span><span class="s2">crossorigin</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Chosen Palette: Warm Neutrals with color-coded risk levels (Green, Yellow, Orange, Red) --&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Application Structure Plan: A task-oriented SPA. Starts with user-configurable impact weights. Main section is an interactive checklist where users evaluate each risk using sliders for Probability and Impact dimensions, with the ability to add/delete custom risks per category. A real-time dashboard with a sortable table, charts, and PDF export visualizes the results. Gemini API integration for mitigation plans and strategic analysis adds a layer of intelligent assistance. A language switcher (PT/ES) enhances usability. --&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Visualization &amp; Content Choices:</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Risk Categories (5): Organized into interactive HTML accordion sections. Goal: Organize.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Risk Items (Pre-defined + Custom): Presented as HTML cards with descriptions, now with a delete button. Goal: Inform/Input/Manage.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- P &amp; I Evaluation: Interactive HTML sliders (1-5). Goal: Interact/Input.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Impact Weights: Interactive HTML sliders. Goal: Configure/Interact.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Custom Risk Form: HTML form within each category. Goal: Input/Customize.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Dashboard Export: Button to trigger PDF export of the results section using jsPDF and html2canvas. Goal: Share/Output.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Risk Prioritization: Sortable HTML table. Goal: Compare/Organize.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Risk Distribution: Chart.js Bar Chart. Goal: Summarize/Compare.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Risk Matrix: Chart.js Bubble Chart. Goal: Relationships/Analyze.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Mitigation Plan Generation (Gemini): Renders Markdown, allows TXT/HTML export. Goal: Assist/Solve.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Strategic Analysis (Gemini): Renders Markdown, allows TXT/HTML export. Goal: Synthesize/Advise.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Language Selector: Buttons in the header. Goal: Accessibility/Usability.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span>- Justification: This combination provides a highly customizable, intelligent, and internationalized workflow with robust input, analysis, and output capabilities.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">     </span>--&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. --&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">body</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s7">'Inter'</span><span class="s1">, </span><span class="s8">sans-serif</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s5"> </span><span class="s8">#ffffff</span><span class="s5">; </span><span class="s1">/* CHANGE: Set to white for better logo visibility */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.chart-container</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s8">relative</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s9">100%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-width:</span><span class="s1"> </span><span class="s9">800px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-left:</span><span class="s1"> </span><span class="s8">auto</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-right:</span><span class="s1"> </span><span class="s8">auto</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">400px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-height:</span><span class="s1"> </span><span class="s9">50vh</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>@</span><span class="s4">media</span><span class="s1"> (</span><span class="s4">min-width:</span><span class="s1"> 768</span><span class="s4">px</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>.chart-container {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">450px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.slider-thumb::-webkit-slider-thumb</span><span class="s5"> {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">-webkit-appearance:</span><span class="s5"> </span><span class="s8">none</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">appearance:</span><span class="s1"> </span><span class="s8">none</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s9">20px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">20px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s9">50%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s8">#3b82f6</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s8">pointer</span><span class="s1">;</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s5"> </span><span class="s1">background-color</span><span class="s5"> </span><span class="s9">0.2s</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.slider-thumb:hover::-webkit-slider-thumb</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s8">#2563eb</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.slider-thumb::-moz-range-thumb</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s9">20px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">20px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s9">50%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s8">#3b82f6</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s8">pointer</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s8">none</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">         </span></span><span class="s1">.slider-thumb:hover::-moz-range-thumb</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s8">#2563eb</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.table-header-sortable</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s8">pointer</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s8">relative</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.table-header-sortable::after</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">content:</span><span class="s1"> </span><span class="s7">' \2195'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">0.5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s8">absolute</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">right:</span><span class="s1"> </span><span class="s9">0.5rem</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.table-header-sortable.asc::after</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">content:</span><span class="s1"> </span><span class="s7">' \2191'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.table-header-sortable.desc::after</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">content:</span><span class="s1"> </span><span class="s7">' \2193'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.modal-overlay</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s1"> </span><span class="s8">opacity</span><span class="s1"> </span><span class="s9">0.3s</span><span class="s1"> </span><span class="s8">ease</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.modal-box</span><span class="s1"> {</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s5"> </span><span class="s1">transform</span><span class="s5"> </span><span class="s9">0.3s</span><span class="s5"> </span><span class="s1">ease</span><span class="s5">, </span><span class="s1">opacity</span><span class="s5"> </span><span class="s9">0.3s</span><span class="s5"> </span><span class="s1">ease</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.loader</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s9">4px</span><span class="s1"> </span><span class="s8">solid</span><span class="s1"> </span><span class="s8">#f3f3f3</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-top:</span><span class="s1"> </span><span class="s9">4px</span><span class="s1"> </span><span class="s8">solid</span><span class="s1"> </span><span class="s8">#3b82f6</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s9">50%</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s9">40px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">40px</span><span class="s1">;</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">animation:</span><span class="s5"> </span><span class="s1">spin</span><span class="s5"> </span><span class="s9">1s</span><span class="s5"> </span><span class="s1">linear</span><span class="s5"> </span><span class="s1">infinite</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">@keyframes</span><span class="s1"> </span><span class="s8">spin</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">0%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s8">rotate(</span><span class="s9">0deg</span><span class="s8">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">100%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s8">rotate(</span><span class="s9">360deg</span><span class="s8">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.lang-btn.active</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s9">0</span><span class="s1"> </span><span class="s9">0</span><span class="s1"> </span><span class="s9">0</span><span class="s1"> </span><span class="s9">2px</span><span class="s1"> </span><span class="s8">#ffffff</span><span class="s1">, </span><span class="s9">0</span><span class="s1"> </span><span class="s9">0</span><span class="s1"> </span><span class="s9">0</span><span class="s1"> </span><span class="s9">4px</span><span class="s1"> </span><span class="s8">#3b82f6</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#modal-content</span><span class="s5"> </span><span class="s1">ul</span><span class="s5"> {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">list-style-type:</span><span class="s5"> </span><span class="s8">disc</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding-left:</span><span class="s1"> </span><span class="s9">20px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#modal-content</span><span class="s5"> </span><span class="s1">li</span><span class="s5"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-bottom:</span><span class="s1"> </span><span class="s9">0.5rem</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">body</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-slate-800"</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"container mx-auto p-4 md:p-8"</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">header</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-12 relative"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">             </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"mb-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://i.postimg.cc/fLCJqqvC/Captura-de-Tela-2025-06-13-a-s-10-39-35.png"</span><span class="s5"> </span><span class="s2">alt</span><span class="s3">=</span><span class="s1">"Logo da Empresa"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mx-auto h-16"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"absolute top-0 right-0 flex space-x-2"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"lang-pt"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"lang-btn p-1 rounded-full active"</span><span class="s5"> </span><span class="s2">data-lang</span><span class="s3">=</span><span class="s1">"pt"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://placehold.co/32x32/009c3b/FFFFFF?text=BR"</span><span class="s5"> </span><span class="s2">alt</span><span class="s3">=</span><span class="s1">"Bandeira do Brasil"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-8 h-8 rounded-full"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"lang-es"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"lang-btn p-1 rounded-full"</span><span class="s5"> </span><span class="s2">data-lang</span><span class="s3">=</span><span class="s1">"es"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://placehold.co/32x32/c8102e/FFFFFF?text=ES"</span><span class="s5"> </span><span class="s2">alt</span><span class="s3">=</span><span class="s1">"Bandeira da Espanha"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-8 h-8 rounded-full"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">h1</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"main-title"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-4xl md:text-5xl font-bold text-slate-900 mb-4"</span><span class="s3">&gt;</span><span class="s5">Ferramenta de Avaliação de Riscos com IA</span><span class="s3">&lt;/</span><span class="s4">h1</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"subtitle"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg text-slate-600 max-w-3xl mx-auto"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>Configure os pesos, avalie cada risco e utilize a IA para gerar planos de mitigação e análises estratégicas instantaneamente.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">header</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">main</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Configuration Section --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">section</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"configuracao"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-12 bg-slate-50 p-6 rounded-2xl shadow-lg"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"step1-title"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-2xl font-bold mb-2 text-slate-900"</span><span class="s3">&gt;</span><span class="s1">Passo 1: Ponderação dos Critérios de Impacto</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"step1-desc"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-slate-600 mb-6"</span><span class="s3">&gt;</span><span class="s1">Ajuste os pesos para cada dimensão de impacto de acordo com as prioridades do seu projeto. A soma total deve ser 100%.</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"weights-container"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;!-- Weight sliders will be inserted here by JS --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-4 text-right font-bold text-lg"</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"weights-total"</span><span class="s3">&gt;</span><span class="s5">Total: 100%</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">section</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Assessment Section --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">section</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"avaliacao"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-12"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"step2-title"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold mb-6 text-slate-900 text-center"</span><span class="s3">&gt;</span><span class="s5">Passo 2: Avaliação dos Riscos</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"risk-accordion"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"space-y-4"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;!-- Risk categories and cards will be inserted here by JS --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">section</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Dashboard Section --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">section</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"dashboard"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50 p-6 rounded-2xl shadow-lg"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"step3-title"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-3xl font-bold mb-8 text-slate-900 text-center"</span><span class="s3">&gt;</span><span class="s5">Passo 3: Painel de Resultados</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-8 flex flex-wrap gap-4 justify-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"strategic-analysis-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors shadow-md"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>✨ Obter Análise Estratégica por IA</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                     </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"pdf-export-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors shadow-md"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>📄 Exportar para PDF</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 lg:grid-cols-2 gap-12"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"chart1-title"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-xl font-bold mb-4 text-slate-800 text-center"</span><span class="s3">&gt;</span><span class="s1">Matriz de Risco (Probabilidade vs. Impacto)</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"chart-container"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s4">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"riskMatrixChart"</span><span class="s3">&gt;&lt;/</span><span class="s4">canvas</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"chart2-title"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-xl font-bold mb-4 text-slate-800 text-center"</span><span class="s3">&gt;</span><span class="s1">Distribuição de Riscos por Classificação</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"chart-container"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s4">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"riskDistributionChart"</span><span class="s3">&gt;&lt;/</span><span class="s4">canvas</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"mt-12"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                     </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"table-title"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold mb-4 text-slate-800 text-center"</span><span class="s3">&gt;</span><span class="s5">Tabela de Priorização de Riscos</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                     </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"overflow-x-auto"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s4">table</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full text-left border-collapse"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s4">thead</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"bg-slate-100"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s3">&lt;</span><span class="s4">tr</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                                    </span></span><span class="s3">&lt;</span><span class="s4">th</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"th-risk"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 text-sm font-semibold tracking-wide text-left"</span><span class="s3">&gt;</span><span class="s5">Risco</span><span class="s3">&lt;/</span><span class="s4">th</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                                    </span></span><span class="s3">&lt;</span><span class="s4">th</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"th-category"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 text-sm font-semibold tracking-wide text-left"</span><span class="s3">&gt;</span><span class="s5">Categoria</span><span class="s3">&lt;/</span><span class="s4">th</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                                    </span></span><span class="s3">&lt;</span><span class="s4">th</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"th-probability"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 text-sm font-semibold tracking-wide text-center table-header-sortable"</span><span class="s5"> </span><span class="s2">data-sort</span><span class="s3">=</span><span class="s1">"probabilidade"</span><span class="s3">&gt;</span><span class="s5">Probabilidade</span><span class="s3">&lt;/</span><span class="s4">th</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                                    </span></span><span class="s3">&lt;</span><span class="s4">th</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"th-impact"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 text-sm font-semibold tracking-wide text-center table-header-sortable"</span><span class="s5"> </span><span class="s2">data-sort</span><span class="s3">=</span><span class="s1">"impacto"</span><span class="s3">&gt;</span><span class="s5">Impacto Ponderado</span><span class="s3">&lt;/</span><span class="s4">th</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                                    </span></span><span class="s3">&lt;</span><span class="s4">th</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"th-degree"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 text-sm font-semibold tracking-wide text-center table-header-sortable desc"</span><span class="s5"> </span><span class="s2">data-sort</span><span class="s3">=</span><span class="s1">"grau"</span><span class="s3">&gt;</span><span class="s5">Grau de Risco</span><span class="s3">&lt;/</span><span class="s4">th</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                                    </span></span><span class="s3">&lt;</span><span class="s4">th</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"th-classification"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 text-sm font-semibold tracking-wide text-center"</span><span class="s3">&gt;</span><span class="s5">Classificação</span><span class="s3">&lt;/</span><span class="s4">th</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s3">&lt;/</span><span class="s4">tr</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;/</span><span class="s4">thead</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s4">tbody</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"risk-table-body"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"divide-y divide-slate-200"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                                </span></span><span class="s1">&lt;!-- Table rows will be inserted here by JS --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;/</span><span class="s4">tbody</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;/</span><span class="s4">table</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                     </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">section</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">main</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">footer</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mt-16 pt-8 border-t border-slate-200"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"footer-text"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-slate-500"</span><span class="s3">&gt;</span><span class="s1">Desenvolvido como uma ferramenta interativa com IA baseada na metodologia de avaliação de riscos.</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">             </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"mt-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">img</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://i.postimg.cc/d0BsJkTt/logo-branco.png"</span><span class="s5"> </span><span class="s2">alt</span><span class="s3">=</span><span class="s1">"Logo DiG"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mx-auto h-12 mb-4"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">a</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://dioceliogoulart.com.br/"</span><span class="s5"> </span><span class="s2">target</span><span class="s3">=</span><span class="s1">"_blank"</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"noopener noreferrer"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-blue-600 hover:underline"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>https://dioceliogoulart.com.br/</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s4">a</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"copyright-text"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-4 text-sm text-slate-500"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>©️ 2025- TODOS OS DIREITOS RESERVADOS</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">footer</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Gemini Modal --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gemini-modal"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 modal-overlay opacity-0 pointer-events-none"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col modal-box transform scale-95 opacity-0"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-between items-center p-4 border-b border-slate-200"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-title"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-slate-900"</span><span class="s3">&gt;&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-close-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-slate-500 hover:text-slate-800 text-3xl"</span><span class="s3">&gt;</span><span class="s5">&amp;times;</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-content"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-6 overflow-y-auto"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Content will be injected here --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-footer"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 border-t border-slate-200 text-right space-x-2 hidden"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                 </span></span><span class="s1">&lt;!-- Export buttons will be injected here --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-loader"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-6 flex-grow flex items-center justify-center hidden"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-center"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"loader mx-auto"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"loader-text"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"mt-4 text-slate-600"</span><span class="s3">&gt;</span><span class="s1">A IA está a pensar... Por favor, aguarde.</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> i18n = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>pt: {</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>mainTitle: </span><span class="s1">"Ferramenta de Avaliação de Riscos com IA"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>subtitle: </span><span class="s1">"Configure os pesos, avalie cada risco e utilize a IA para gerar planos de mitigação e análises estratégicas instantaneamente."</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step1Title: </span><span class="s1">"Passo 1: Ponderação dos Critérios de Impacto"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step1Desc: </span><span class="s1">"Ajuste os pesos para cada dimensão de impacto de acordo com as prioridades do seu projeto. A soma total deve ser 100%."</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step2Title: </span><span class="s1">"Passo 2: Avaliação dos Riscos"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step3Title: </span><span class="s1">"Passo 3: Painel de Resultados"</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>strategicAnalysisBtn: </span><span class="s7">"✨ Obter Análise Estratégica por IA"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>pdfExportBtn: </span><span class="s7">"📄 Exportar para PDF"</span><span class="s1">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>chart1Title: </span><span class="s1">"Matriz de Risco (Probabilidade vs. Impacto)"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>chart2Title: </span><span class="s1">"Distribuição de Riscos por Classificação"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>tableTitle: </span><span class="s1">"Tabela de Priorização de Riscos"</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thRisk: </span><span class="s7">"Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thCategory: </span><span class="s7">"Categoria"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thProbability: </span><span class="s7">"Probabilidade"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thImpact: </span><span class="s7">"Impacto Ponderado"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thDegree: </span><span class="s7">"Grau de Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thClassification: </span><span class="s7">"Classificação"</span><span class="s1">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>footerText: </span><span class="s1">"Desenvolvido como uma ferramenta interativa com IA baseada na metodologia de avaliação de riscos."</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>copyrightText: </span><span class="s1">"©️ 2025- TODOS OS DIREITOS RESERVADOS"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>loaderText: </span><span class="s1">"A IA está a pensar... Por favor, aguarde."</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risks: </span><span class="s7">"riscos"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risk: </span><span class="s7">"Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>probability: </span><span class="s7">"Probabilidade"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>impact: </span><span class="s7">"Impacto"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>weightedImpact: </span><span class="s7">"Impacto Ponderado"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskDegree: </span><span class="s7">"Grau de Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>classification: </span><span class="s7">"Classificação"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>mitigationPlanBtn: </span><span class="s7">"✨ Gerar Plano de Mitigação"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>mitigationPlanFor: </span><span class="s7">"Plano de Mitigação para:"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>strategicAnalysisFor: </span><span class="s7">"Análise Estratégica dos Riscos por IA"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>addRiskBtn: </span><span class="s7">"➕ Adicionar Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>newRiskName: </span><span class="s7">"Nome do Novo Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>newRiskDesc: </span><span class="s7">"Descrição do Novo Risco"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>saveBtn: </span><span class="s7">"Salvar"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>cancelBtn: </span><span class="s7">"Cancelar"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>total: </span><span class="s7">"Total"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>classifications: { </span><span class="s12">Baixo</span><span class="s1">: </span><span class="s7">'Baixo'</span><span class="s1">, </span><span class="s12">M</span><span class="s13">é</span><span class="s1">dio: </span><span class="s7">'Médio'</span><span class="s1">, </span><span class="s12">Alto</span><span class="s1">: </span><span class="s7">'Alto'</span><span class="s1">, </span><span class="s12">Cr</span><span class="s13">í</span><span class="s1">tico: </span><span class="s7">'Crítico'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>exportTxt: </span><span class="s7">"Salvar como TXT"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>exportHtml: </span><span class="s7">"Salvar como HTML"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>},</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>es: {</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>mainTitle: </span><span class="s1">"Herramienta de Evaluación de Riesgos con IA"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>subtitle: </span><span class="s1">"Configure los pesos, evalúe cada riesgo y utilice la IA para generar planes de mitigación y análisis estratégicos al instante."</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step1Title: </span><span class="s1">"Paso 1: Ponderación de los Criterios de Impacto"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step1Desc: </span><span class="s1">"Ajuste los pesos para cada dimensión de impacto según las prioridades de su proyecto. La suma total debe ser 100%."</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>step2Title: </span><span class="s1">"Paso 2: Evaluación de los Riesgos"</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>step3Title: </span><span class="s7">"Paso 3: Panel de Resultados"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>strategicAnalysisBtn: </span><span class="s7">"✨ Obtener Análisis Estratégico por IA"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>pdfExportBtn: </span><span class="s7">"📄 Exportar a PDF"</span><span class="s1">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>chart1Title: </span><span class="s1">"Matriz de Riesgo (Probabilidad vs. Impacto)"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>chart2Title: </span><span class="s1">"Distribución de Riesgos por Clasificación"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>tableTitle: </span><span class="s1">"Tabla de Priorización de Riesgos"</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thRisk: </span><span class="s7">"Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thCategory: </span><span class="s7">"Categoría"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thProbability: </span><span class="s7">"Probabilidad"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thImpact: </span><span class="s7">"Impacto Ponderado"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thDegree: </span><span class="s7">"Grado de Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>thClassification: </span><span class="s7">"Clasificación"</span><span class="s1">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>footerText: </span><span class="s1">"Desarrollado como una herramienta interactiva con IA basada en la metodología de evaluación de riesgos."</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>copyrightText: </span><span class="s1">"©️ 2025- TODOS LOS DERECHOS RESERVADOS"</span><span class="s5">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>loaderText: </span><span class="s1">"La IA está pensando... Por favor, espere."</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risks: </span><span class="s7">"riesgos"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risk: </span><span class="s7">"Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>probability: </span><span class="s7">"Probabilidad"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>impact: </span><span class="s7">"Impacto"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>weightedImpact: </span><span class="s7">"Impacto Ponderado"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskDegree: </span><span class="s7">"Grado de Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>classification: </span><span class="s7">"Clasificación"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>mitigationPlanBtn: </span><span class="s7">"✨ Generar Plan de Mitigación"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>mitigationPlanFor: </span><span class="s7">"Plan de Mitigación para:"</span><span class="s1">,</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>strategicAnalysisFor: </span><span class="s1">"Análisis Estratégico de los Riesgos por IA"</span><span class="s5">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>addRiskBtn: </span><span class="s7">"➕ Añadir Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>newRiskName: </span><span class="s7">"Nombre del Nuevo Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>newRiskDesc: </span><span class="s7">"Descripción del Nuevo Riesgo"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>saveBtn: </span><span class="s7">"Guardar"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>cancelBtn: </span><span class="s7">"Cancelar"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>total: </span><span class="s7">"Total"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>classifications: { </span><span class="s12">Baixo</span><span class="s1">: </span><span class="s7">'Bajo'</span><span class="s1">, </span><span class="s12">M</span><span class="s13">é</span><span class="s1">dio: </span><span class="s7">'Medio'</span><span class="s1">, </span><span class="s12">Alto</span><span class="s1">: </span><span class="s7">'Alto'</span><span class="s1">, </span><span class="s12">Cr</span><span class="s13">í</span><span class="s1">tico: </span><span class="s7">'Crítico'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>exportTxt: </span><span class="s7">"Guardar como TXT"</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>exportHtml: </span><span class="s7">"Guardar como HTML"</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> riskData = [</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: crypto.randomUUID(), category: </span><span class="s1">'Estratégicos e de Negócio'</span><span class="s5">, risk: </span><span class="s1">'Alinhamento com os Objetivos de Negócio'</span><span class="s5">, description: </span><span class="s1">'O novo ERP não suporta adequadamente os objetivos estratégicos de longo prazo da empresa.'</span><span class="s5"> },</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: crypto.randomUUID(), category: </span><span class="s1">'Estratégicos e de Negócio'</span><span class="s5">, risk: </span><span class="s1">'Baixo Engajamento da Alta Gestão'</span><span class="s5">, description: </span><span class="s1">'Falta de apoio e patrocínio visível por parte dos executivos, resultando em baixa prioridade e recursos insuficientes.'</span><span class="s5"> },</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: crypto.randomUUID(), category: </span><span class="s1">'Gerenciamento de Projeto e Execução'</span><span class="s5">, risk: </span><span class="s1">'Escopo Mal Definido ou "Scope Creep"'</span><span class="s5">, description: </span><span class="s1">'Aumento contínuo e não controlado das funcionalidades e requisitos do projeto.'</span><span class="s5"> },</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: crypto.randomUUID(), category: </span><span class="s1">'Técnicos e de Tecnologia'</span><span class="s5">, risk: </span><span class="s1">'Problemas na Migração de Dados'</span><span class="s5">, description: </span><span class="s1">'Dados do sistema legado são migrados de forma incorreta, incompleta ou com perda de qualidade.'</span><span class="s5"> },</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: crypto.randomUUID(), category: </span><span class="s1">'Operacionais e de Pessoas'</span><span class="s5">, risk: </span><span class="s1">'Treinamento Inadequado dos Usuários Finais'</span><span class="s5">, description: </span><span class="s1">'Usuários não recebem treinamento suficiente ou eficaz para operar o novo sistema corretamente.'</span><span class="s5"> },</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: crypto.randomUUID(), category: </span><span class="s1">'Relacionados a Fornecedores e Parceiros'</span><span class="s5">, risk: </span><span class="s1">'Dependência Excessiva do Fornecedor'</span><span class="s5">, description: </span><span class="s1">'A empresa se torna excessivamente dependente do fornecedor para manutenção e futuras melhorias.'</span><span class="s5"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>];</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> state = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lang: </span><span class="s7">'pt'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>weights: { </span><span class="s12">Custo</span><span class="s1">: </span><span class="s14">30</span><span class="s1">, </span><span class="s12">Cronograma</span><span class="s1">: </span><span class="s14">30</span><span class="s1">, </span><span class="s12">Qualidade</span><span class="s1">: </span><span class="s14">20</span><span class="s1">, </span><span class="s12">Opera</span><span class="s13">çõ</span><span class="s1">es: </span><span class="s14">20</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>risks: [],</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>sortConfig: { key: </span><span class="s7">'grau'</span><span class="s1">, direction: </span><span class="s7">'desc'</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> impactDimensions = [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>{ id: </span><span class="s7">'Custo'</span><span class="s1">, name: </span><span class="s7">'Custo'</span><span class="s1">, name_es: </span><span class="s7">'Costo'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>{ id: </span><span class="s7">'Cronograma'</span><span class="s1">, name: </span><span class="s7">'Cronograma'</span><span class="s1">, name_es: </span><span class="s7">'Cronograma'</span><span class="s1"> },</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>{ id: </span><span class="s1">'Qualidade'</span><span class="s5">, name: </span><span class="s1">'Qualidade/Escopo'</span><span class="s5">, name_es: </span><span class="s1">'Calidad/Alcance'</span><span class="s5"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>{ id: </span><span class="s7">'Operações'</span><span class="s1">, name: </span><span class="s7">'Operações'</span><span class="s1">, name_es: </span><span class="s7">'Operaciones'</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>];</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> riskMatrixChart, riskDistributionChart;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> setLanguage(lang) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.lang = lang;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.documentElement.lang = lang === </span><span class="s7">'pt'</span><span class="s1"> ? </span><span class="s7">'pt-BR'</span><span class="s1"> : lang;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll(</span><span class="s7">'.lang-btn'</span><span class="s1">).forEach(btn =&gt; btn.classList.remove(</span><span class="s7">'active'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">`lang-</span><span class="s1">${lang}</span><span class="s7">`</span><span class="s1">).classList.add(</span><span class="s7">'active'</span><span class="s1">);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'main-title'</span><span class="s1">).textContent = t.mainTitle;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'subtitle'</span><span class="s1">).textContent = t.subtitle;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'step1-title'</span><span class="s1">).textContent = t.step1Title;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'step1-desc'</span><span class="s1">).textContent = t.step1Desc;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'step2-title'</span><span class="s1">).textContent = t.step2Title;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'step3-title'</span><span class="s1">).textContent = t.step3Title;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'strategic-analysis-btn'</span><span class="s1">).textContent = t.strategicAnalysisBtn;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'pdf-export-btn'</span><span class="s1">).textContent = t.pdfExportBtn;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'chart1-title'</span><span class="s1">).textContent = t.chart1Title;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'chart2-title'</span><span class="s1">).textContent = t.chart2Title;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'table-title'</span><span class="s1">).textContent = t.tableTitle;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'th-risk'</span><span class="s1">).textContent = t.thRisk;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'th-category'</span><span class="s1">).textContent = t.thCategory;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'th-probability'</span><span class="s1">).textContent = t.thProbability;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'th-impact'</span><span class="s1">).textContent = t.thImpact;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'th-degree'</span><span class="s1">).textContent = t.thDegree;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'th-classification'</span><span class="s1">).textContent = t.thClassification;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'footer-text'</span><span class="s1">).textContent = t.footerText;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'copyright-text'</span><span class="s1">).textContent = t.copyrightText;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'loader-text'</span><span class="s1">).textContent = t.loaderText;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'weights-total'</span><span class="s1">).textContent = </span><span class="s7">`</span><span class="s1">${t.total}</span><span class="s7">: </span><span class="s1">${</span><span class="s12">Object</span><span class="s1">.values(state.weights).reduce((s, v) =&gt; s + v, </span><span class="s14">0</span><span class="s1">)}</span><span class="s7">%`</span><span class="s1">;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>rebuildUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>updateAll();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> getRiskClassification(score) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (score &gt;= </span><span class="s14">4.0</span><span class="s1">) </span><span class="s10">return</span><span class="s1"> { classification: t.classifications.</span><span class="s12">Cr</span><span class="s13">í</span><span class="s1">tico, color: </span><span class="s7">'#ef4444'</span><span class="s1">, textColor: </span><span class="s7">'text-red-600'</span><span class="s1"> };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (score &gt;= </span><span class="s14">3.0</span><span class="s1">) </span><span class="s10">return</span><span class="s1"> { classification: t.classifications.</span><span class="s12">Alto</span><span class="s1">, color: </span><span class="s7">'#f97316'</span><span class="s1">, textColor: </span><span class="s7">'text-orange-600'</span><span class="s1"> };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (score &gt;= </span><span class="s14">2.0</span><span class="s1">) </span><span class="s10">return</span><span class="s1"> { classification: t.classifications.</span><span class="s12">M</span><span class="s13">é</span><span class="s1">dio, color: </span><span class="s7">'#facc15'</span><span class="s1">, textColor: </span><span class="s7">'text-yellow-600'</span><span class="s1"> };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> { classification: t.classifications.</span><span class="s12">Baixo</span><span class="s1">, color: </span><span class="s7">'#22c55e'</span><span class="s1">, textColor: </span><span class="s7">'text-green-600'</span><span class="s1"> };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">async</span><span class="s1"> </span><span class="s10">function</span><span class="s1"> callGemini(prompt) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> apiKey = </span><span class="s7">""</span><span class="s1">;</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s5"> apiUrl = </span><span class="s1">`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=</span><span class="s5">${apiKey}</span><span class="s1">`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> payload = { contents: [{ role: </span><span class="s7">"user"</span><span class="s1">, parts: [{ text: prompt }] }] };</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> response = </span><span class="s10">await</span><span class="s1"> fetch(apiUrl, {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>method: </span><span class="s7">'POST'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>headers: { </span><span class="s7">'Content-Type'</span><span class="s1">: </span><span class="s7">'application/json'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>body: </span><span class="s12">JSON</span><span class="s1">.stringify(payload)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (!response.ok) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">throw</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Error</span><span class="s1">(</span><span class="s7">`API Error: </span><span class="s1">${response.statusText}</span><span class="s7">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> result = </span><span class="s10">await</span><span class="s1"> response.json();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (result.candidates &amp;&amp; result.candidates.length &gt; </span><span class="s14">0</span><span class="s1"> &amp;&amp; result.candidates[</span><span class="s14">0</span><span class="s1">].content.parts.length &gt; </span><span class="s14">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">return</span><span class="s1"> result.candidates[</span><span class="s14">0</span><span class="s1">].content.parts[</span><span class="s14">0</span><span class="s1">].text;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s10">throw</span><span class="s5"> </span><span class="s10">new</span><span class="s5"> </span><span class="s12">Error</span><span class="s5">(</span><span class="s1">"Resposta da IA inválida ou vazia."</span><span class="s5">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s10">catch</span><span class="s1"> (error) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>console.error(</span><span class="s7">"Erro ao chamar a API Gemini:"</span><span class="s1">, error);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s10">return</span><span class="s5"> </span><span class="s1">`Ocorreu um erro ao comunicar com a IA. Por favor, tente novamente. Detalhe: </span><span class="s5">${error.message}</span><span class="s1">`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> parseMarkdown(text) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> html = text</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>.replace(</span><span class="s4">/\*\*(.*?)\*\*/</span><span class="s10">g</span><span class="s1">, </span><span class="s7">'&lt;strong&gt;$1&lt;/strong&gt;'</span><span class="s1">)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>.replace(</span><span class="s4">/\*(.*?)\*/</span><span class="s10">g</span><span class="s1">, </span><span class="s7">'&lt;em&gt;$1&lt;/em&gt;'</span><span class="s1">);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> inList = </span><span class="s10">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.split(</span><span class="s7">'\n'</span><span class="s1">).map(line =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (line.trim().startsWith(</span><span class="s7">'- '</span><span class="s1">) || line.trim().startsWith(</span><span class="s7">'* '</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">let</span><span class="s1"> listContent = </span><span class="s7">`&lt;li&gt;</span><span class="s1">${line.trim().substring(</span><span class="s14">2</span><span class="s1">)}</span><span class="s7">&lt;/li&gt;`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> (!inList) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>listContent = </span><span class="s7">'&lt;ul&gt;'</span><span class="s1"> + listContent;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>inList = </span><span class="s10">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">return</span><span class="s1"> listContent;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s10">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> (inList) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>inList = </span><span class="s10">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s10">return</span><span class="s1"> </span><span class="s7">`&lt;/ul&gt;</span><span class="s1">${line ? </span><span class="s7">'&lt;p&gt;'</span><span class="s1"> + line + </span><span class="s7">'&lt;/p&gt;'</span><span class="s1"> : </span><span class="s7">''</span><span class="s1">}</span><span class="s7">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">return</span><span class="s1"> line ? </span><span class="s7">`&lt;p&gt;</span><span class="s1">${line}</span><span class="s7">&lt;/p&gt;`</span><span class="s1"> : </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}).join(</span><span class="s7">''</span><span class="s1">);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (inList) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>html += </span><span class="s7">'&lt;/ul&gt;'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> html.replace(</span><span class="s4">/&lt;p&gt;&lt;\/p&gt;/</span><span class="s10">g</span><span class="s1">, </span><span class="s7">''</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> showModal(options) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> { title, renderedContent, rawText, type } = options;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modal = document.getElementById(</span><span class="s7">'gemini-modal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalTitle = document.getElementById(</span><span class="s7">'modal-title'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalContent = document.getElementById(</span><span class="s7">'modal-content'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalFooter = document.getElementById(</span><span class="s7">'modal-footer'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalLoader = document.getElementById(</span><span class="s7">'modal-loader'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalBox = modal.querySelector(</span><span class="s7">'.modal-box'</span><span class="s1">);</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modalTitle.textContent = title;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modalFooter.innerHTML = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (renderedContent) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modalContent.innerHTML = renderedContent;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modalContent.classList.remove(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modalLoader.classList.add(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (type === </span><span class="s7">'mitigation'</span><span class="s1"> || type === </span><span class="s7">'analysis'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> fileNameSlug = title.toLowerCase().replace(</span><span class="s4">/[:\s]+/</span><span class="s10">g</span><span class="s1">, </span><span class="s7">'-'</span><span class="s1">).replace(</span><span class="s4">/[^a-z0-9-]/</span><span class="s10">g</span><span class="s1">, </span><span class="s7">''</span><span class="s1">).substring(</span><span class="s14">0</span><span class="s1">, </span><span class="s14">50</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>modalFooter.innerHTML = </span><span class="s7">`</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="export-txt" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors"&gt;</span><span class="s5">${t.exportTxt}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="export-html" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors"&gt;</span><span class="s5">${t.exportHtml}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s7">'export-txt'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, () =&gt; exportToFile(rawText, </span><span class="s7">`</span><span class="s1">${fileNameSlug}</span><span class="s7">.txt`</span><span class="s1">, </span><span class="s7">'text/plain'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById(</span><span class="s7">'export-html'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, () =&gt; exportToFile(renderedContent, </span><span class="s7">`</span><span class="s1">${fileNameSlug}</span><span class="s7">.html`</span><span class="s1">, </span><span class="s7">'text/html'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>modalFooter.classList.remove(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s10">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                     </span>modalFooter.classList.add(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s10">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modalContent.classList.add(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modalFooter.classList.add(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modalLoader.classList.remove(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.remove(</span><span class="s7">'opacity-0'</span><span class="s1">, </span><span class="s7">'pointer-events-none'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modalBox.classList.remove(</span><span class="s7">'scale-95'</span><span class="s1">, </span><span class="s7">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> hideModal() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modal = document.getElementById(</span><span class="s7">'gemini-modal'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalBox = modal.querySelector(</span><span class="s7">'.modal-box'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modalBox.classList.add(</span><span class="s7">'scale-95'</span><span class="s1">, </span><span class="s7">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>modal.classList.add(</span><span class="s7">'opacity-0'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>modal.classList.add(</span><span class="s7">'pointer-events-none'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}, </span><span class="s14">300</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> exportToFile(content, fileName, contentType) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> fullContent = content;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (contentType === </span><span class="s7">'text/html'</span><span class="s1">) {</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>fullContent = </span><span class="s1">`&lt;!DOCTYPE html&gt;&lt;html lang="</span><span class="s5">${state.lang}</span><span class="s1">"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;</span><span class="s5">${fileName.replace(</span><span class="s1">'.html'</span><span class="s5">, </span><span class="s1">''</span><span class="s5">)}</span><span class="s1">&lt;/title&gt;&lt;style&gt;body{font-family: sans-serif; line-height: 1.6;} ul{list-style-type: disc; padding-left: 20px;} li{margin-bottom: 0.5rem;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;</span><span class="s5">${content}</span><span class="s1">&lt;/body&gt;&lt;/html&gt;`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> blob = </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Blob</span><span class="s1">([fullContent], { type: contentType });</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> a = document.createElement(</span><span class="s7">'a'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>a.href = </span><span class="s12">URL</span><span class="s1">.createObjectURL(blob);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>a.download = fileName;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.body.appendChild(a);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>a.click();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.body.removeChild(a);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">URL</span><span class="s1">.revokeObjectURL(a.href);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">async</span><span class="s1"> </span><span class="s10">function</span><span class="s1"> handleMitigationPlan(riskId) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> riskIndex = state.risks.findIndex(r =&gt; r.id === riskId);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (riskIndex === -</span><span class="s14">1</span><span class="s1">) </span><span class="s10">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> risk = state.risks[riskIndex];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> langName = state.lang === </span><span class="s7">'pt'</span><span class="s1"> ? </span><span class="s7">'português'</span><span class="s1"> : </span><span class="s7">'español'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalTitle = </span><span class="s7">`</span><span class="s1">${t.mitigationPlanFor}</span><span class="s7"> </span><span class="s1">${risk.name}</span><span class="s7">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showModal({ title: modalTitle });</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s5"> prompt = </span><span class="s1">`Aja como um gestor de projetos sénior especialista em implementações de ERP. Para o seguinte risco, forneça um plano de mitigação detalhado e prático em </span><span class="s5">${langName}</span><span class="s1">. O plano deve ser apresentado em formato de lista com marcadores (bullet points), usando **texto em negrito** para ênfase quando apropriado. Forneça SOMENTE a lista de ações, sem nenhuma frase introdutória ou de conclusão.\n\nRisco: </span><span class="s5">${risk.name}</span><span class="s1">\nDescrição: </span><span class="s5">${riskData.find(rd =&gt; rd.id === riskId).description}</span><span class="s1">`</span><span class="s5">;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> result = </span><span class="s10">await</span><span class="s1"> callGemini(prompt);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> truncatedResult = result.substring(</span><span class="s14">0</span><span class="s1">, </span><span class="s14">4000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> renderedHtml = parseMarkdown(truncatedResult);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showModal({ title: modalTitle, renderedContent: renderedHtml, rawText: truncatedResult, type: </span><span class="s7">'mitigation'</span><span class="s1"> });</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">async</span><span class="s1"> </span><span class="s10">function</span><span class="s1"> handleStrategicAnalysis() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> langName = state.lang === </span><span class="s7">'pt'</span><span class="s1"> ? </span><span class="s7">'português'</span><span class="s1"> : </span><span class="s7">'español'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> modalTitle = t.strategicAnalysisFor;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showModal({ title: modalTitle });</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> topRisks = [...state.risks].sort((a,b) =&gt; b.riskScore - a.riskScore).slice(</span><span class="s14">0</span><span class="s1">, </span><span class="s14">3</span><span class="s1">);</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s5"> prompt = </span><span class="s1">`Aja como um consultor estratégico de TI especialista em projetos de ERP. Com base nos seguintes riscos de maior pontuação identificados num projeto, forneça uma análise estratégica concisa em </span><span class="s5">${langName}</span><span class="s1">. A sua análise deve:\n1. Resumir o perfil de risco geral do projeto.\n2. Identificar possíveis interações ou efeitos cumulativos entre estes riscos.\n3. Sugerir as principais áreas de foco para o gestor do projeto.\n\nRiscos Principais:\n`</span><span class="s5">;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>topRisks.forEach((risk, i) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>prompt += </span><span class="s7">`- Risco </span><span class="s1">${i+</span><span class="s14">1</span><span class="s1">}</span><span class="s7">: </span><span class="s1">${risk.name}</span><span class="s7"> (Grau de Risco: </span><span class="s1">${risk.riskScore.toFixed(</span><span class="s14">2</span><span class="s1">)}</span><span class="s7">)\n`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>prompt += </span><span class="s1">"\nForneça a resposta em texto corrido e bem estruturado. Use **texto em negrito** para destacar os pontos chave. Não inclua uma frase de abertura ou de conclusão, vá direto para a análise."</span><span class="s5">;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> result = </span><span class="s10">await</span><span class="s1"> callGemini(prompt);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> truncatedResult = result.substring(</span><span class="s14">0</span><span class="s1">, </span><span class="s14">4000</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> renderedHtml = parseMarkdown(truncatedResult);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>showModal({ title: modalTitle, renderedContent: renderedHtml, rawText: truncatedResult, type: </span><span class="s7">'analysis'</span><span class="s1"> });</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">async</span><span class="s1"> </span><span class="s10">function</span><span class="s1"> handleExportPDF() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> { jsPDF } = window.jspdf;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> dashboard = document.getElementById(</span><span class="s7">'dashboard'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> loader = document.createElement(</span><span class="s7">'div'</span><span class="s1">);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>loader.innerHTML = </span><span class="s1">`&lt;div class="fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-75"&gt;&lt;div class="loader"&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.body.appendChild(loader);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> canvas = </span><span class="s10">await</span><span class="s1"> html2canvas(dashboard, {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>scale: </span><span class="s14">2</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>backgroundColor: </span><span class="s7">'#ffffff'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>useCORS: </span><span class="s10">true</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.body.removeChild(loader);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> imgData = canvas.toDataURL(</span><span class="s7">'image/png'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> pdf = </span><span class="s10">new</span><span class="s1"> jsPDF({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>orientation: </span><span class="s7">'p'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>unit: </span><span class="s7">'px'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>format: [canvas.width, canvas.height]</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>pdf.addImage(imgData, </span><span class="s7">'PNG'</span><span class="s1">, </span><span class="s14">0</span><span class="s1">, </span><span class="s14">0</span><span class="s1">, canvas.width, canvas.height);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>pdf.save(</span><span class="s1">'painel-de-resultados-riscos.pdf'</span><span class="s5">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleDeleteRisk(riskId) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>riskData = riskData.filter(r =&gt; r.id !== riskId);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.risks = state.risks.filter(r =&gt; r.id !== riskId);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>rebuildUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>updateAll();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> calculateRiskScores() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.risks.forEach(risk =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> weightedImpact = impactDimensions.reduce((acc, dim) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">return</span><span class="s1"> acc + (risk.impacts[dim.id] * (state.weights[dim.id] / </span><span class="s14">100</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}, </span><span class="s14">0</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risk.weightedImpact = weightedImpact;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risk.riskScore = (risk.probability + weightedImpact) / </span><span class="s14">2</span><span class="s1">; </span><span class="s15">// NEW CALCULATION</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> { classification, color } = getRiskClassification(risk.riskScore);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risk.classification = classification;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>risk.color = color;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> updateAll() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>calculateRiskScores();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>updateRiskCardsUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>updateDashboard();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>updateTable();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> updateRiskCardsUI() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.risks.forEach((risk, index) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> riskCard = document.getElementById(</span><span class="s7">`risk-card-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1">(!riskCard) </span><span class="s10">return</span><span class="s1">;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskCard.querySelector(</span><span class="s7">`#weighted-impact-label-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">).textContent = t.weightedImpact;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskCard.querySelector(</span><span class="s7">`#risk-score-label-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">).textContent = t.riskDegree;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskCard.querySelector(</span><span class="s7">`#classification-label-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">).textContent = t.classification;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskCard.querySelector(</span><span class="s7">`#weighted-impact-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">).textContent = risk.weightedImpact.toFixed(</span><span class="s14">2</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskCard.querySelector(</span><span class="s7">`#risk-score-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">).textContent = risk.riskScore.toFixed(</span><span class="s14">2</span><span class="s1">);</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> { classification, textColor } = getRiskClassification(risk.riskScore);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> classificationEl = riskCard.querySelector(</span><span class="s7">`#classification-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>classificationEl.textContent = classification;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>classificationEl.className = </span><span class="s7">`font-bold </span><span class="s1">${textColor}</span><span class="s7">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> updateDashboard() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> classifications = { [t.classifications.</span><span class="s12">Baixo</span><span class="s1">]: </span><span class="s14">0</span><span class="s1">, [t.classifications.</span><span class="s12">M</span><span class="s13">é</span><span class="s1">dio]: </span><span class="s14">0</span><span class="s1">, [t.classifications.</span><span class="s12">Alto</span><span class="s1">]: </span><span class="s14">0</span><span class="s1">, [t.classifications.</span><span class="s12">Cr</span><span class="s13">í</span><span class="s1">tico]: </span><span class="s14">0</span><span class="s1"> };</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.risks.forEach(risk =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1">(risk.classification) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                   </span>classifications[risk.classification]++;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (riskDistributionChart) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskDistributionChart.data.labels = </span><span class="s12">Object</span><span class="s1">.keys(t.classifications).map(k =&gt; t.classifications[k]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskDistributionChart.data.datasets[</span><span class="s14">0</span><span class="s1">].data = </span><span class="s12">Object</span><span class="s1">.values(classifications);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskDistributionChart.update();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> (riskMatrixChart) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskMatrixChart.options.scales.y.title.text = t.thProbability;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskMatrixChart.options.scales.x.title.text = t.thImpact;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskMatrixChart.data.datasets[</span><span class="s14">0</span><span class="s1">].data = state.risks.map(r =&gt; ({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>x: r.weightedImpact,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>y: r.probability,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>r: r.riskScore * </span><span class="s14">2</span><span class="s1"> + </span><span class="s14">2</span><span class="s1">, </span><span class="s15">// Adjusted radius for new score range</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>label: r.name,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>backgroundColor: r.color,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>borderColor: r.color,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskMatrixChart.update();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> updateTable() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> tableBody = document.getElementById(</span><span class="s7">'risk-table-body'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>tableBody.innerHTML = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> sortedRisks = [...state.risks].sort((a, b) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">let</span><span class="s1"> aValue = a[state.sortConfig.key === </span><span class="s7">'grau'</span><span class="s1"> ? </span><span class="s7">'riskScore'</span><span class="s1"> : (state.sortConfig.key === </span><span class="s7">'impacto'</span><span class="s1"> ? </span><span class="s7">'weightedImpact'</span><span class="s1"> : </span><span class="s7">'probability'</span><span class="s1">)];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">let</span><span class="s1"> bValue = b[state.sortConfig.key === </span><span class="s7">'grau'</span><span class="s1"> ? </span><span class="s7">'riskScore'</span><span class="s1"> : (state.sortConfig.key === </span><span class="s7">'impacto'</span><span class="s1"> ? </span><span class="s7">'weightedImpact'</span><span class="s1"> : </span><span class="s7">'probability'</span><span class="s1">)];</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (aValue &lt; bValue) </span><span class="s10">return</span><span class="s1"> state.sortConfig.direction === </span><span class="s7">'asc'</span><span class="s1"> ? -</span><span class="s14">1</span><span class="s1"> : </span><span class="s14">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (aValue &gt; bValue) </span><span class="s10">return</span><span class="s1"> state.sortConfig.direction === </span><span class="s7">'asc'</span><span class="s1"> ? </span><span class="s14">1</span><span class="s1"> : -</span><span class="s14">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">return</span><span class="s1"> </span><span class="s14">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>sortedRisks.forEach(risk =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> { textColor, classification } = getRiskClassification(risk.riskScore);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>tableBody.innerHTML += </span><span class="s7">`</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;tr class="hover:bg-slate-50"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;td class="p-3 text-sm text-slate-700"&gt;</span><span class="s5">${risk.name}</span><span class="s1">&lt;/td&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;td class="p-3 text-sm text-slate-500"&gt;</span><span class="s5">${risk.category}</span><span class="s1">&lt;/td&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;td class="p-3 text-sm text-slate-700 text-center"&gt;</span><span class="s5">${risk.probability}</span><span class="s1">&lt;/td&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;td class="p-3 text-sm text-slate-700 text-center"&gt;</span><span class="s5">${risk.weightedImpact.toFixed(</span><span class="s14">2</span><span class="s5">)}</span><span class="s1">&lt;/td&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;td class="p-3 text-sm text-slate-700 text-center font-bold"&gt;</span><span class="s5">${risk.riskScore.toFixed(</span><span class="s14">2</span><span class="s5">)}</span><span class="s1">&lt;/td&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;td class="p-3 text-sm font-bold text-center </span><span class="s5">${textColor}</span><span class="s1">"&gt;</span><span class="s5">${classification}</span><span class="s1">&lt;/td&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/tr&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> createRiskCard(risk) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> riskState = state.risks.find(r =&gt; r.id === risk.id);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> riskCard = document.createElement(</span><span class="s7">'div'</span><span class="s1">);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">            </span>riskCard.className = </span><span class="s1">"border border-slate-200 p-4 rounded-lg bg-white"</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>riskCard.id = </span><span class="s7">`risk-card-</span><span class="s1">${risk.id}</span><span class="s7">`</span><span class="s1">;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">let</span><span class="s1"> impactSlidersHTML = impactDimensions.map(dim =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> dimName = state.lang === </span><span class="s7">'es'</span><span class="s1"> ? dim.name_es : dim.name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">return</span><span class="s1"> </span><span class="s7">`</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="mb-2"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;label for="impact-</span><span class="s5">${dim.id}</span><span class="s1">-</span><span class="s5">${risk.id}</span><span class="s1">" class="text-sm"&gt;</span><span class="s5">${dimName}</span><span class="s1">&lt;/label&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center space-x-2"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="range" id="impact-</span><span class="s5">${dim.id}</span><span class="s1">-</span><span class="s5">${risk.id}</span><span class="s1">" min="1" max="5" value="</span><span class="s5">${riskState.impacts[dim.id]}</span><span class="s1">" data-risk-id="</span><span class="s5">${risk.id}</span><span class="s1">" data-dim-id="</span><span class="s5">${dim.id}</span><span class="s1">" class="w-full slider-thumb h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span id="impact-value-</span><span class="s5">${dim.id}</span><span class="s1">-</span><span class="s5">${risk.id}</span><span class="s1">" class="font-semibold w-4 text-center"&gt;</span><span class="s5">${riskState.impacts[dim.id]}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}).join(</span><span class="s7">''</span><span class="s1">);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>riskCard.innerHTML = </span><span class="s7">`</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-start"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex-grow"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-bold text-md text-slate-900"&gt;</span><span class="s5">${risk.risk}</span><span class="s1">&lt;/h4&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="text-sm text-slate-500 mb-4"&gt;</span><span class="s5">${risk.description}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-risk-id="</span><span class="s5">${risk.id}</span><span class="s1">" class="delete-btn text-red-400 hover:text-red-600 ml-2 p-1" title="Excluir Risco"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span class="text-2xl"&gt;🗑️&lt;/span&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h5 class="font-semibold mb-2"&gt;</span><span class="s5">${t.probability}</span><span class="s1">&lt;/h5&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center space-x-2"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="range" id="prob-</span><span class="s5">${risk.id}</span><span class="s1">" min="1" max="5" value="</span><span class="s5">${riskState.probability}</span><span class="s1">" data-risk-id="</span><span class="s5">${risk.id}</span><span class="s1">" class="w-full slider-thumb h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="prob-value-</span><span class="s5">${risk.id}</span><span class="s1">" class="font-semibold w-4 text-center"&gt;</span><span class="s5">${riskState.probability}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h5 class="font-semibold mb-2"&gt;</span><span class="s5">${t.impact}</span><span class="s1">&lt;/h5&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s5">${impactSlidersHTML}</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="mt-4 pt-4 border-t border-slate-200 flex flex-col sm:flex-row items-center"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="grid grid-cols-3 text-center flex-grow mb-4 sm:mb-0"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                         </span>&lt;div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="weighted-impact-label-</span><span class="s5">${risk.id}</span><span class="s1">" class="text-xs text-slate-500"&gt;</span><span class="s5">${t.weightedImpact}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="weighted-impact-</span><span class="s5">${risk.id}</span><span class="s1">" class="font-bold text-lg text-slate-800"&gt;0.00&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="risk-score-label-</span><span class="s5">${risk.id}</span><span class="s1">" class="text-xs text-slate-500"&gt;</span><span class="s5">${t.riskDegree}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="risk-score-</span><span class="s5">${risk.id}</span><span class="s1">" class="font-bold text-lg text-slate-800"&gt;0.00&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="classification-label-</span><span class="s5">${risk.id}</span><span class="s1">" class="text-xs text-slate-500"&gt;</span><span class="s5">${t.classification}</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="classification-</span><span class="s5">${risk.id}</span><span class="s1">" class="font-bold"&gt;&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;div class="sm:ml-4 flex-shrink-0"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button data-risk-id="</span><span class="s5">${risk.id}</span><span class="s1">" class="mitigation-btn bg-blue-100 text-blue-700 text-sm font-bold py-2 px-3 rounded-lg hover:bg-blue-200 transition-colors"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s5">${t.mitigationPlanBtn}</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> riskCard;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> rebuildUI() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> t = i18n[state.lang];</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> weightsContainer = document.getElementById(</span><span class="s7">'weights-container'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>weightsContainer.innerHTML = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">             </span>impactDimensions.forEach(dim =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> dimName = state.lang === </span><span class="s7">'es'</span><span class="s1"> ? dim.name_es : dim.name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>weightsContainer.innerHTML += </span><span class="s7">`</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="weight-</span><span class="s5">${dim.id}</span><span class="s1">" class="block text-sm font-medium text-slate-700"&gt;</span><span class="s5">${dimName}</span><span class="s1">&lt;/label&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center space-x-4"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="range" id="weight-</span><span class="s5">${dim.id}</span><span class="s1">" min="0" max="100" step="5" value="</span><span class="s5">${state.weights[dim.id]}</span><span class="s1">" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer slider-thumb"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="weight-value-</span><span class="s5">${dim.id}</span><span class="s1">" class="font-bold text-slate-800 w-12 text-right"&gt;</span><span class="s5">${state.weights[dim.id]}</span><span class="s1">%&lt;/span&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> accordionContainer = document.getElementById(</span><span class="s7">'risk-accordion'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>accordionContainer.innerHTML = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> categories = [...</span><span class="s10">new</span><span class="s1"> </span><span class="s12">Set</span><span class="s1">(riskData.map(item =&gt; item.category))];</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>categories.forEach(category =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> categoryId = category.replace(</span><span class="s4">/[^a-zA-Z0-9]/</span><span class="s10">g</span><span class="s1">, </span><span class="s7">''</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> categoryWrapper = document.createElement(</span><span class="s7">'div'</span><span class="s1">);</span></p>
<p class="p9"><span class="s5"><span class="Apple-converted-space">                </span>categoryWrapper.className = </span><span class="s1">"bg-slate-50 rounded-xl shadow-md overflow-hidden"</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> categoryRisksInState = riskData.filter(r =&gt; r.category === category);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>categoryWrapper.innerHTML = </span><span class="s7">`</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="accordion-btn w-full p-5 text-left font-bold text-lg text-slate-800 bg-slate-100 hover:bg-slate-200 transition-colors flex justify-between items-center"&gt;</span></p>
<p class="p5"><span class="s7"><span class="Apple-converted-space">                        </span>&lt;span&gt;</span><span class="s1">${category}</span><span class="s7"> (</span><span class="s1">${categoryRisksInState.length}</span><span class="s7"> </span><span class="s1">${t.risks}</span><span class="s7">)&lt;/span&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"&gt;&lt;/path&gt;&lt;/svg&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="accordion-content p-5 space-y-6 hidden"&gt;&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="p-4 border-t border-slate-200"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button class="add-risk-btn w-full text-blue-600 font-semibold hover:text-blue-800"&gt;</span><span class="s5">${t.addRiskBtn}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="add-risk-form hidden mt-4 space-y-3"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" placeholder="</span><span class="s5">${t.newRiskName}</span><span class="s1">" class="new-risk-name w-full p-2 border border-slate-300 rounded-md"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;textarea placeholder="</span><span class="s5">${t.newRiskDesc}</span><span class="s1">" class="new-risk-desc w-full p-2 border border-slate-300 rounded-md"&gt;&lt;/textarea&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="flex justify-end space-x-2"&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;button class="cancel-risk-btn bg-slate-200 text-slate-800 px-4 py-2 rounded-md hover:bg-slate-300"&gt;</span><span class="s5">${t.cancelBtn}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;button class="save-risk-btn bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700" data-category="</span><span class="s5">${category}</span><span class="s1">"&gt;</span><span class="s5">${t.saveBtn}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>accordionContainer.appendChild(categoryWrapper);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> contentDiv = categoryWrapper.querySelector(</span><span class="s7">'.accordion-content'</span><span class="s1">);</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>riskData.forEach((risk) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> (risk.category === category) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>contentDiv.appendChild(createRiskCard(risk));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> attachGlobalListeners() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> accordionContainer = document.getElementById(</span><span class="s7">'risk-accordion'</span><span class="s1">);</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>accordionContainer.addEventListener(</span><span class="s7">'click'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> target = e.target;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (target.closest(</span><span class="s7">'.accordion-btn'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> btn = target.closest(</span><span class="s7">'.accordion-btn'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>btn.nextElementSibling.classList.toggle(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>btn.querySelector(</span><span class="s7">'svg'</span><span class="s1">).classList.toggle(</span><span class="s7">'rotate-180'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (target.closest(</span><span class="s7">'.add-risk-btn'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> btn = target.closest(</span><span class="s7">'.add-risk-btn'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>btn.classList.add(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>btn.nextElementSibling.classList.remove(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (target.closest(</span><span class="s7">'.cancel-risk-btn'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> form = target.closest(</span><span class="s7">'.add-risk-form'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>form.classList.add(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>form.previousElementSibling.classList.remove(</span><span class="s7">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (target.closest(</span><span class="s7">'.save-risk-btn'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> form = target.closest(</span><span class="s7">'.add-risk-form'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> category = target.dataset.category;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> newName = form.querySelector(</span><span class="s7">'.new-risk-name'</span><span class="s1">).value;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> newDesc = form.querySelector(</span><span class="s7">'.new-risk-desc'</span><span class="s1">).value;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> (!newName || !newDesc) </span><span class="s10">return</span><span class="s1">;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> newRisk = { id: crypto.randomUUID(), category: category, risk: newName, description: newDesc };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>riskData.push(newRisk);</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>state.risks.push({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>id: newRisk.id,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>name: newRisk.risk,<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>category: newRisk.category,<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>probability: </span><span class="s14">3</span><span class="s1">,<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>impacts: { </span><span class="s12">Custo</span><span class="s1">: </span><span class="s14">3</span><span class="s1">, </span><span class="s12">Cronograma</span><span class="s1">: </span><span class="s14">3</span><span class="s1">, </span><span class="s12">Qualidade</span><span class="s1">: </span><span class="s14">3</span><span class="s1">, </span><span class="s12">Opera</span><span class="s13">çõ</span><span class="s1">es: </span><span class="s14">3</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>rebuildUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>updateAll();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                 </span></span><span class="s10">if</span><span class="s1"> (target.closest(</span><span class="s7">'.delete-btn'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> riskId = target.closest(</span><span class="s7">'.delete-btn'</span><span class="s1">).dataset.riskId;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>handleDeleteRisk(riskId);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1">(target.closest(</span><span class="s7">'.mitigation-btn'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> riskId = target.closest(</span><span class="s7">'.mitigation-btn'</span><span class="s1">).dataset.riskId;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>handleMitigationPlan(riskId);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>accordionContainer.addEventListener(</span><span class="s7">'input'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1">(e.target.matches(</span><span class="s7">'input[type="range"]'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> riskId = e.target.dataset.riskId;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> riskState = state.risks.find(r =&gt; r.id === riskId);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> (!riskState) </span><span class="s10">return</span><span class="s1">;</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1">(e.target.id.startsWith(</span><span class="s7">'prob-'</span><span class="s1">)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>riskState.probability = parseInt(e.target.value);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>document.getElementById(</span><span class="s7">`prob-value-</span><span class="s1">${riskId}</span><span class="s7">`</span><span class="s1">).textContent = e.target.value;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>} </span><span class="s10">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s10">const</span><span class="s1"> dimId = e.target.dataset.dimId;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>riskState.impacts[dimId] = parseInt(e.target.value);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>document.getElementById(</span><span class="s7">`impact-value-</span><span class="s1">${dimId}</span><span class="s7">-</span><span class="s1">${riskId}</span><span class="s7">`</span><span class="s1">).textContent = e.target.value;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>updateAll();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> initialize() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>riskData.forEach((risk) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.risks.push({<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>id: risk.id,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>name: risk.risk,<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>category: risk.category,<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>probability: </span><span class="s14">3</span><span class="s1">,<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>impacts: { </span><span class="s12">Custo</span><span class="s1">: </span><span class="s14">3</span><span class="s1">, </span><span class="s12">Cronograma</span><span class="s1">: </span><span class="s14">3</span><span class="s1">, </span><span class="s12">Qualidade</span><span class="s1">: </span><span class="s14">3</span><span class="s1">, </span><span class="s12">Opera</span><span class="s13">çõ</span><span class="s1">es: </span><span class="s14">3</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'modal-close-btn'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, hideModal);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'gemini-modal'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> (e.target.id === </span><span class="s7">'gemini-modal'</span><span class="s1">) hideModal();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'strategic-analysis-btn'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, handleStrategicAnalysis);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'pdf-export-btn'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, handleExportPDF);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'lang-pt'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, () =&gt; setLanguage(</span><span class="s7">'pt'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s7">'lang-es'</span><span class="s1">).addEventListener(</span><span class="s7">'click'</span><span class="s1">, () =&gt; setLanguage(</span><span class="s7">'es'</span><span class="s1">));</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>attachGlobalListeners();</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> ctxMatrix = document.getElementById(</span><span class="s7">'riskMatrixChart'</span><span class="s1">).getContext(</span><span class="s7">'2d'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>riskMatrixChart = </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Chart</span><span class="s1">(ctxMatrix, {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>type: </span><span class="s7">'bubble'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>data: { datasets: [{ label: </span><span class="s7">'Riscos'</span><span class="s1">, data: [] }] },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>options: {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>responsive: </span><span class="s10">true</span><span class="s1">, maintainAspectRatio: </span><span class="s10">false</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>scales: { y: { beginAtZero: </span><span class="s10">true</span><span class="s1">, max: </span><span class="s14">5.5</span><span class="s1">, title: { display: </span><span class="s10">true</span><span class="s1"> } }, x: { beginAtZero: </span><span class="s10">true</span><span class="s1">, max: </span><span class="s14">5.5</span><span class="s1">, title: { display: </span><span class="s10">true</span><span class="s1"> } } },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>plugins: { tooltip: { callbacks: { label: (c) =&gt; { </span><span class="s10">const</span><span class="s1"> d = c.dataset.data[c.dataIndex]; </span><span class="s10">return</span><span class="s1"> d ? </span><span class="s7">`</span><span class="s1">${d.label}</span><span class="s7">: GR </span><span class="s1">${d.r.toFixed(</span><span class="s14">2</span><span class="s1">)}</span><span class="s7">`</span><span class="s1"> : </span><span class="s7">''</span><span class="s1">; } } }, legend: { display: </span><span class="s10">false</span><span class="s1"> } }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> ctxDist = document.getElementById(</span><span class="s7">'riskDistributionChart'</span><span class="s1">).getContext(</span><span class="s7">'2d'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>riskDistributionChart = </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Chart</span><span class="s1">(ctxDist, {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>type: </span><span class="s7">'bar'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>data: { labels: [], datasets: [{ label: </span><span class="s7">'# de Riscos'</span><span class="s1">, data: [], backgroundColor: [</span><span class="s7">'#22c55e'</span><span class="s1">, </span><span class="s7">'#facc15'</span><span class="s1">, </span><span class="s7">'#f97316'</span><span class="s1">, </span><span class="s7">'#ef4444'</span><span class="s1">] }] },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>options: { responsive: </span><span class="s10">true</span><span class="s1">, maintainAspectRatio: </span><span class="s10">false</span><span class="s1">, indexAxis: </span><span class="s7">'y'</span><span class="s1">, scales: { x: { beginAtZero: </span><span class="s10">true</span><span class="s1"> } }, plugins: { legend: { display: </span><span class="s10">false</span><span class="s1"> } } }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll(</span><span class="s7">'.table-header-sortable'</span><span class="s1">).forEach(header =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>header.addEventListener(</span><span class="s7">'click'</span><span class="s1">, () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> key = header.dataset.sort;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> (state.sortConfig.key === key) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>state.sortConfig.direction = state.sortConfig.direction === </span><span class="s7">'asc'</span><span class="s1"> ? </span><span class="s7">'desc'</span><span class="s1"> : </span><span class="s7">'asc'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>} </span><span class="s10">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>state.sortConfig.key = key;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>state.sortConfig.direction = </span><span class="s7">'desc'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>document.querySelectorAll(</span><span class="s7">'.table-header-sortable'</span><span class="s1">).forEach(h =&gt; h.classList.remove(</span><span class="s7">'asc'</span><span class="s1">, </span><span class="s7">'desc'</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>header.classList.add(state.sortConfig.direction);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>updateTable();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>rebuildUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>updateAll();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>window.onload = initialize;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s11"></span><br></p>
</body>
</html>
